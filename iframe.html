<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ArrowUBG | Iframe</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <style>
    body {
      margin: 0;
      height: 100vh;
      background-color: #0a1d37;
      color: #e9f7ff;
      font-family: 'Poppins', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .iframe-container {
      width: 90vw;
      height: 80vh;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 0 30px rgba(0,240,255,0.3);
      border: 3px solid #00f0ff;
      background-color: #0a1d37;
      display: flex;
      flex-direction: column;
    }

    iframe {
      flex: 1;
      width: 100%;
      border: none;
      border-radius: 20px 20px 0 0;
      background-color: #ffffff;
    }

    .controls {
      height: 50px;
      background: linear-gradient(to right, #00334e, #001a2e);
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 40px;
      border-radius: 0 0 20px 20px;
      box-shadow: 0 -3px 12px rgba(0,240,255,0.2);
    }

    .icon {
      color: #00f0ff;
      font-size: 22px;
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    .icon:hover { transform: scale(1.2); }
  </style>
</head>
<body>
  <div class="iframe-container">
    <iframe id="myIframe"></iframe>
    <div class="controls">
      <i class="fas fa-expand icon" onclick="toggleFullscreen()"></i>
      <i class="fas fa-sync icon" onclick="refreshIframe()"></i>
      <i class="fas fa-arrow-left icon" onclick="goBack()"></i>
    </div>
  </div>

  <script>
    // Grab ?url= from query string
    const params = new URLSearchParams(window.location.search);
    let url = params.get("url");

    // If the URL has a fragment (#...), append it
    if (url && window.location.hash) {
      url = url + window.location.hash;
    }

    const iframe = document.getElementById("myIframe");

    // Load the URL into the iframe
    if (url) {
      iframe.src = url;
      // Save last used URL so if user reloads without ?url, it still works
      localStorage.setItem("iframeUrl", url);
      // Clean the address bar
      history.replaceState(null, "", window.location.pathname);
    } else {
      // Fallback: reuse last URL if available
      const savedUrl = localStorage.getItem("iframeUrl");
      if (savedUrl) {
        iframe.src = savedUrl;
      }
    }

    // Controls
    function toggleFullscreen() {
      if (iframe.requestFullscreen) iframe.requestFullscreen();
      else if (iframe.webkitRequestFullscreen) iframe.webkitRequestFullscreen();
      else if (iframe.msRequestFullscreen) iframe.msRequestFullscreen();
    }

    function refreshIframe() {
      iframe.src = iframe.src;
    }

    function goBack() {
      window.history.back();
    }
  </script>
</body>
</html>
